<ion-content>
  <ion-item class="ion-no-padding">
    <ion-text class="roofing-title">Chimneys</ion-text>
  </ion-item>

  <form [formGroup]="ngForm">
    <ion-grid>
      <ion-row>
        <ion-col size="12" size-xs="12">
          <ion-item style="--padding-start: 0px">
            <ion-input
              formControlName="chimneys"
              class="roofing-label sf-pro-regular"
              placeholder="Name"></ion-input>
          </ion-item>
          <ion-item
            lines="none"
            class="ion-no-padding item-error"
            *ngIf="
              ngForm.get('chimneys').invalid &&
              (ngForm.get('chimneys').dirty || ngForm.get('chimneys').touched)
            ">
            <ion-label color="danger" style="text-align: center" class="roofing-error">
              Name is a required field and it could be up 30 characteres
            </ion-label>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-item class="ion-no-padding" lines="none">
            <ion-checkbox
              slot="start"
              formControlName="onRigde"
              color="success"
              mode="md"></ion-checkbox>

            <ion-text class="ion-no-wraper">It is over the ridge</ion-text>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="6" size-xs="5">
          <ion-item class="ion-no-padding" lines="none">
            <div>
              <ion-label class="ion-no-wraper">Exact width</ion-label>
              <ion-label
                class="ion-no-wraper roofing-title-popup"
                color="medium"
                *ngIf="getDescWidth()"
                >{{ getDescWidth() }}</ion-label
              >
            </div>
          </ion-item>
        </ion-col>
        <ion-col size="3" size-xs="4">
          <ion-item color="light" lines="none">
            <ion-input
              formControlName="width"
              class="ion-text-right"
              (keypress)="allowNumbers($event, 'width')"
              placeholder="00"
              (ionChange)="onChangeWidthCricketExists()"></ion-input>
            <ion-label slot="end">IN</ion-label>
          </ion-item>
          <ion-label
            color="danger"
            class="roofing-error"
            *ngIf="
              ngForm.get('width').invalid &&
              (ngForm.get('width').touched || ngForm.get('width').dirty)
            "
            >Required field</ion-label
          >
        </ion-col>
        <ion-col size="3" size-xs="3">
          <ion-item color="light" lines="none">
            <ion-input
              formControlName="fWidth"
              placeholder="0"
              (click)="openPopoverFractions($event, 1)"></ion-input>
          </ion-item>
          <ion-label
            color="danger"
            class="roofing-error"
            *ngIf="
              ngForm.get('fWidth').invalid &&
              (ngForm.get('fWidth').touched || ngForm.get('fWidth').dirty)
            "
            >Required field</ion-label
          >
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="6" size-xs="5">
          <ion-item class="ion-no-padding" lines="none">
            <div>
              <ion-label class="ion-no-wraper">Exact length</ion-label>
              <ion-label
                class="ion-no-wraper roofing-title-popup"
                color="medium"
                *ngIf="getDescLength()"
                >{{ getDescLength() }}</ion-label
              >
            </div>
          </ion-item>
        </ion-col>
        <ion-col size="3" size-xs="4">
          <ion-item color="light" lines="none">
            <ion-input
              formControlName="lenght"
              class="ion-text-right"
              (keypress)="allowNumbers($event, 'lenght')"
              placeholder="00"></ion-input>
            <ion-label slot="end">IN</ion-label>
          </ion-item>
          <ion-label
            color="danger"
            class="roofing-error"
            *ngIf="
              ngForm.get('lenght').invalid &&
              (ngForm.get('lenght').touched || ngForm.get('lenght').dirty)
            "
            >Required field</ion-label
          >
        </ion-col>
        <ion-col size="3" size-xs="3">
          <ion-item color="light" lines="none">
            <ion-input
              formControlName="fLenght"
              placeholder="0"
              (click)="openPopoverFractions($event, 2)"></ion-input>
          </ion-item>
          <ion-label
            color="danger"
            class="roofing-error"
            *ngIf="
              ngForm.get('fLenght').invalid &&
              (ngForm.get('fLenght').touched || ngForm.get('fLenght').dirty)
            "
            >Required field</ion-label
          >
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-item class="ion-no-padding" lines="none">
            <ion-checkbox
              slot="start"
              formControlName="cricketExists"
              color="success"
              mode="md"
              (ionChange)="onChangeWidthCricketExists()"></ion-checkbox>

            <ion-text class="ion-no-wraper">There is a cricket installed</ion-text>
          </ion-item>
        </ion-col>
      </ion-row>
      <app-button-option-simple
        [description]="
          ngForm.get('pitch').value
            ? 'Pitch angle ' + ngForm.get('pitch').value + '/12'
            : 'Pitch angle  01/12'
        "
        [active]="validatePitch()"
        (modalEmited)="openPopoverPitch($event)"></app-button-option-simple>

      <ion-row>
        <ion-col>
          <ion-text class="ion-no-wraper">New soldered cricket</ion-text>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="6" size-xs="5">
          <ion-item class="ion-no-padding" lines="none">
            <ion-text class="ion-no-wraper">Height</ion-text>
          </ion-item>
        </ion-col>
        <ion-col size="3" size-xs="4">
          <ion-item color="light" lines="none">
            <ion-input
              formControlName="scHeight"
              class="ion-text-right"
              (keypress)="allowNumbers($event, 'scHeight')"
              placeholder="00"
              [disabled]="disabledHeight"></ion-input>
            <ion-label slot="end">IN</ion-label>
          </ion-item>
          <ion-label
            color="danger"
            class="roofing-error"
            *ngIf="
              ngForm.get('scHeight').invalid &&
              (ngForm.get('scHeight').touched || ngForm.get('scHeight').dirty)
            "
            >Valid 6-12 value</ion-label
          >
        </ion-col>
        <ion-col size="3" size-xs="3">
          <ion-item color="light" lines="none">
            <ion-input
              formControlName="fHeight"
              placeholder="0"
              (click)="openPopoverFractions($event, 3)"
              [disabled]="disabledHeight"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <app-button-option-simple
        description="Chimney material"
        [active]="true"
        (modalEmited)="openPopoverWallMaterials($event)"></app-button-option-simple>

      <ion-row *ngIf="wallMaterial">
        <ion-col class="ion-no-padding">
          <ion-item lines="none" class="ion-no-padding detail-item">
            <ion-text class="ion-no-wraper">
              {{ wallMaterial.option }}
            </ion-text>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-row>
            <ion-col>
              <ion-item class="ion-no-padding" lines="none">
                <ion-checkbox
                  slot="start"
                  formControlName="needCutsidding"
                  color="success"
                  mode="md"
                  [disabled]="disabledNeedCutsidding"></ion-checkbox>

                <ion-text class="ion-no-wraper">Cut sidding around chimney</ion-text>
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-item class="ion-no-padding" lines="none">
                <ion-checkbox
                  slot="start"
                  formControlName="needRidglet"
                  color="success"
                  mode="md"
                  [disabled]="disabledNeedRidglet"
                  (ionChange)="onChangeNewRidglet()"></ion-checkbox>

                <ion-text class="ion-no-wraper">Install new reglet</ion-text>
              </ion-item>
            </ion-col>
            <ion-col size="4">
              <ion-item color="light" lines="none">
                <ion-input
                  formControlName="ridgletLF"
                  class="ion-text-right"
                  (keypress)="allowNumbers($event, 'ridgletLF')"
                  placeholder="00"
                  [disabled]="!ngForm.get('needRidglet').value"></ion-input>
                <ion-label slot="end">LF</ion-label>
              </ion-item>
              <ion-label
                color="danger"
                class="roofing-error"
                *ngIf="
                  ngForm.get('ridgletLF').invalid &&
                  (ngForm.get('ridgletLF').touched || ngForm.get('ridgletLF').dirty)
                "
                >Required field</ion-label
              >
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-item class="ion-no-padding" lines="none">
                <ion-checkbox
                  slot="start"
                  formControlName="needLeakexclusion"
                  color="success"
                  mode="md"
                  [disabled]="disabledNeedLeakexclusion"></ion-checkbox>
                <ion-text class="ion-no-wraper"
                  >Chimney will have a leak exclusion</ion-text
                >
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="9" size-xs="8">
          <ion-item lines="none" class="ion-no-padding">
            <ion-text class="ion-no-wraper"> Adittional cost </ion-text>
          </ion-item>
        </ion-col>

        <ion-col size="3" size-xs="4">
          <ion-item color="light" lines="none">
            <ion-label slot="start" class="lbl-left">$</ion-label>
            <ion-input
              formControlName="adittionalCost"
              class="ion-text-left"
              (keypress)="allowNumbers($event, 'adittionalCost')"
              placeholder="00">
            </ion-input>
          </ion-item>
          <ion-label
            color="danger"
            class="roofing-error"
            *ngIf="
              ngForm.get('adittionalCost').invalid &&
              (ngForm.get('adittionalCost').touched || ngForm.get('adittionalCost').dirty)
            "
            >Valid value</ion-label
          >
        </ion-col>
      </ion-row>

      <app-button-option-simple
        description="Add note (consult)"
        [active]="true"
        (modalEmited)="openNote($event)"></app-button-option-simple>

      <ion-button
        class="sf-pro-semibold roofing-button button-padding"
        expand="block"
        color="primary"
        (click)="confirm()"
        [disabled]="!ngForm.valid || !ngForm.dirty">
        Accept
      </ion-button>
    </ion-grid>
  </form>
</ion-content>
